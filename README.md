## ç”¨äºè§†é¢‘ä¸‹è½½/è§†é¢‘è½¬éŸ³é¢‘/éŸ³é¢‘åˆ†å‰²åŸºäºRè¯­è¨€çš„è½»é‡æµç¨‹åŒ–è„šæœ¬

> Author: Wang Jiahao
>
> Date: 2020-10-27
>
> GitHub: https://github.com/JiahaoWongg/Bilidown
>
> Contact:  [jhaowong1998@sina.com](mailto:jhaowong1998@sina.com)


[toc]
### ä¸€ã€ç®€ä»‹

è¯è¯´è¿™ä¹Ÿç®—æ˜¯ç¬¬äºŒä¸ªç‰ˆæœ¬äº†ï¼Œ[ç¬¬ä¸€ä¸ªç‰ˆæœ¬](https://www.jianshu.com/p/9af6b5364389) æ˜¯å†™åœ¨æ–°å† æš´å‘ä¹‹åˆï¼Œå› æ— æ³•è¿”æ ¡æ— èŠè‡³æè€Œå†™ã€‚ç¬¬ä¸€ç‰ˆæ‰€å®ç°çš„åŠŸèƒ½ä¸å¤šï¼Œå› æ­¤ä¸€ç›´æœ‰æ”¹è¿›çš„æƒ³æ³•ã€‚

è„šæœ¬æ‰€å®ç°çš„åŠŸèƒ½çœ‹æ ‡é¢˜å¤§å®¶ä¹Ÿèƒ½çŒœå‡ºä¸€äºŒï¼Œæ„æ€ç”±æ¥å·²ä¹…ï¼Œä½†æˆ‘æ¥è§¦ä»£ç çš„ä¸–ç•Œåœ¨å½“æ—¶ä¹Ÿæ‰åŠå¹´è€Œå·²ã€‚éšç€çŸ¥è¯†çš„å¢åŠ å’Œå®é™…éœ€æ±‚çš„æå‡ºï¼Œä¾¿èŒç”Ÿäº†ç”¨Rè¯­è¨€å®ç°è¿™äº›åŠŸèƒ½çš„æƒ³æ³•äº†ã€‚

æˆ‘æ¯”è¾ƒå–œæ¬¢å¬éŸ³ä¹ï¼Œç‰¹åˆ«æ˜¯å‘¨æ°ä¼¦çš„æ­Œï¼Œè€Œå…¶æ­Œæ›²çš„æ‰’å¸¦ä¹Ÿæ˜¯æˆ‘çš„æœ€çˆ±ï¼ŒBç«™æœ‰è®¸å¤šä¼˜è´¨çš„æ­Œæ›²æ‰’å¸¦è§†é¢‘ï¼Œå› æ­¤æˆ‘å°±æƒ³è¦æŠŠè¿™äº›è§†é¢‘è½¬ä¸ºéŸ³é¢‘ï¼Œæ”¾åˆ°æ‰‹æœºéŸ³ä¹æ’­æ”¾å™¨é‡Œã€‚åæ¥åˆå®ç°äº†å¯¹éŸ³é¢‘æ–‡ä»¶çš„åˆ†å‰²ï¼Œå¹¶å°†è¿™äº›è¿‡ç¨‹æµç¨‹åŒ–ï¼Œä½ åªéœ€è¦æä¾›è§†é¢‘é“¾æ¥å’Œç®€å•çš„å‚æ•°çš„å°±å¯å®ç°è¿™äº›åŠŸèƒ½ã€‚æ€»å…±ä¹Ÿæ‰ 200æ¥è¡Œä»£ç ï¼Œä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œå…¶ä¸­å¤§æ¦‚å«æœ‰ 3/4 çš„æ³¨é‡Šè¡Œå’Œç©ºè¡Œã€‚

å…ˆè¯´è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥å…·ä½“ä»‹ç»è„šæœ¬æ‰€å®ç°çš„åŠŸèƒ½ã€‚

### äºŒã€åŠŸèƒ½ä»‹ç»

æ ¹æ®æä¾›è§†é¢‘é“¾æ¥ [URL](https://baike.baidu.com/item/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%B3%BB%E7%BB%9F/5937042?fromtitle=url&fromid=110640) æ¥æºçš„ä¸åŒï¼Œå°†åŠŸèƒ½åˆ’åˆ†ä¸ºä¸¤å¤§åŠŸèƒ½æ¨¡å¼ï¼šæ¥æºäºå‘½ä»¤è¡Œ [CMD](https://baike.baidu.com/item/%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6?fromtitle=CMD&fromid=1193011) å’Œæ¥æºäºæ–‡æœ¬æ–‡ä»¶ã€‚

#### â‘  CMDæ¨¡å¼

- è§†é¢‘ URL ç›´æ¥ç”±å‘½ä»¤è¡Œæä¾›ï¼Œå³ç›´æ¥åœ¨ç»ˆç«¯ (windows ç³»ç»Ÿæ˜¯`Win + X + C` æ‰“å¼€) é‡Œè¾“å…¥URL
- æ ¹æ® URL è·å–è§†é¢‘æ–‡ä»¶ï¼Œé»˜è®¤ä¸‹è½½æœ€é«˜æ¸…æ™°åº¦æ ¼å¼ï¼ŒVIP è§†é¢‘ä¸èƒ½ä¸‹è½½ï¼Œä¸èƒ½è§£æçš„ URL ä¸èƒ½ä¸‹è½½
- å¦‚æœæ‰€ä¸‹è½½çš„è§†é¢‘æ–‡ä»¶ä¸ºFLVæ ¼å¼ï¼Œåˆ™å°†å…¶è½¬ä¸ºæ›´å®¹æ˜“æ’­æ”¾çš„MP4æ ¼å¼
- å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥å°† MP4 è½¬ä¸º MP3 éŸ³é¢‘æ ¼å¼ï¼Œä¾¿äºå¬
- å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥å°† MP3 åˆ†å‰²ä¸ºï¼ˆæ—¢ä¿ç•™ï¼‰ä½ æƒ³è¦çš„æ—¶é—´æ®µ
- æ ¹æ®ä½ æ‰€æŒ‡å®šçš„è§†é¢‘å’ŒéŸ³é¢‘çš„æ–‡ä»¶å‚¨å­˜è·¯å¾„ï¼ˆæ—¢æ–‡ä»¶å¤¹ï¼‰ï¼Œå°†ç»“æœæ–‡ä»¶å‚¨å­˜åœ¨æŒ‡å®šè·¯å¾„å†…
- æ‰€æœ‰çš„è¿™äº›åªéœ€ä¸€è¡Œä»£ç å³å¯å‡ºç»“æœ

#### â‘¡ æ–‡ä»¶æ¨¡å¼

- è§†é¢‘URLä¸æ˜¯ç›´æ¥è¾“å…¥çš„ï¼Œè€Œæ˜¯å‚¨å­˜åœ¨å•ç‹¬çš„ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚è¿™æ ·ä½ å¯ä»¥å®ç°å¤šä¸ªè§†é¢‘çš„ä¸‹è½½ä¸åç»­å¤„ç†
- æ¯ä¸€ä¸ªURLå¾ªç¯ä¸€æ¬¡ â‘  ä¸­æ‰€è¿°çš„è¿‡ç¨‹ï¼Œå®ç°æ‰¹é‡ä¸‹è½½

å¦‚æœå¯¹äºä»£ç å’Œå‘½ä»¤å®Œå…¨é™Œç”Ÿçš„æœ‹å‹ï¼Œæˆ–è®¸æœ‰äº›åœ°æ–¹ä¸æ˜ç™½ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå…·ä½“æ“å’Œå‚æ•°è®¾ç½®ä½œå°†åœ¨ä¸‹ä¸€èŠ‚å…·ä½“è®²è¿°ã€‚

### ä¸‰ã€ç¯å¢ƒé…ç½®

è¿™ä¸€èŠ‚æ˜¯é‡å¤´æˆï¼Œä¹Ÿæ˜¯æœ€éš¾çš„éƒ¨åˆ†ï¼Œä½¿ç”¨ä¸å¥½çš„æœ‹å‹è¦å¤šè¯»è¯»ã€‚

å¦å¤–ï¼Œç”±äºæˆ‘ç”µè„‘æ˜¯ ==window== ç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘åªè®²åœ¨ `window` é‡Œçš„æ“ä½œæ–¹æ³•ã€‚

#### â‘   è¯­è¨€ç¯å¢ƒé…ç½®

éœ€è¦çš„è¯­è¨€ç¯å¢ƒåŠå·¥å…·ï¼š`Python`ã€`R`ã€`you-get`ã€`ffmpeg`ï¼Œä½ å·²ç»æœ‰çš„å°±é€‰æ‹©æ€§å®‰è£…

æ¥ä¸‹æ¥ä¸€ä¸€ä»‹ç»ï¼Œä¸è¿‡é¦–å…ˆè®²ä¸€ç‚¹ï¼Œå®‰è£…è½¯ä»¶çš„æ—¶å€™è¦æŒ‡å®šå®‰è£…è·¯å¾„ï¼Œä¸è¦æ€»æŠŠè½¯ä»¶æ”¾åœ¨Cç›˜çš„`Program Files`é‡Œã€‚å®‰è£…çš„è·¯å¾„å¿…é¡»è¦çŸ¥é“ï¼Œåé¢éœ€è¦ç”¨åˆ°ã€‚æ¯”å¦‚æˆ‘å°†Dç›˜ä½œä¸ºè½¯ä»¶ç›˜ï¼Œæ‰¾è½¯ä»¶è·¯å¾„çš„æ—¶å€™éå¸¸æ–¹ä¾¿ï¼š

![](https://upload-images.jianshu.io/upload_images/5257017-9ccf75547d8e514f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- Pythonï¼šä¸‹è½½åœ°å€ï¼š [Python](https://www.python.org/downloads/)ï¼ˆç”¨äºå®‰è£… you-get å’Œ ffmpegï¼‰

- R: ä¸‹è½½åœ°å€ï¼š[R](https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/windows/base/)ï¼Œ ç”¨äºè¿è¡Œè„šæœ¬

- æ·»åŠ Rå’ŒPythonçš„ç¯å¢ƒå˜é‡ï¼Œå‚ç…§ï¼š[Windows ç³»ç»Ÿæ·»åŠ ç¯å¢ƒå˜é‡](https://www.jianshu.com/p/1717c6cad9e7)

- æ£€éªŒä¸¤ä¸ªè¯­è¨€ç¯å¢ƒæ˜¯å¦å®‰è£…æˆåŠŸï¼š

  å¿«æ·é”® `Win + X + C` æ‰“å¼€å‘½ä»¤æç¤ºç¬¦é¢æ¿ï¼ˆä»¥ä¸‹ç®€ç§° `ç»ˆç«¯` ï¼‰ï¼š

  ```sh
  Microsoft Windows [ç‰ˆæœ¬ 10.0.18362.1082]
  (c) 2019 Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
  
  C:\Users\Jay Chou>
  ```

  è¿è¡Œï¼š

  ```
  python --version & Rscript --version
  ```

  å¾—åˆ°ä»¥ä¸‹ç»“æœï¼Œåˆ™å®‰è£…å¹¶ç¯å¢ƒé…ç½®æˆåŠŸï¼æ­å–œ~

  ```sh
  C:\Users\Jay Chou>python --version & Rscript --version
  Python 3.8.5
  R scripting front-end version 3.6.2 (2019-12-12)
  
  C:\Users\Jay Chou>
  ```

#### â‘¡ å®‰è£… `you-get` å’Œ `ffmpeg`


- you-getï¼šä¸‹è½½è§†é¢‘æ–‡ä»¶å’Œå¼¹å¹•æ–‡ä»¶ä¹‹ç±»çš„

- ffmpegï¼šæ–‡ä»¶æ ¼å¼è½¬æ¢
  
  è¿è¡Œï¼š
  
```sh
  pip install you-get & pip install FFmpeg
```

  è¿è¡Œï¼š

```sh
  you-get --version & ffmpeg -version
```

   å‰ä¸‰è¡Œå¾—åˆ°ä»¥ä¸‹ç»“æœï¼Œåˆ™å®‰è£…æˆåŠŸï¼

  ```sh
  C:\Users\Jay Chou>you-get --version & ffmpeg -version
  you-get: version 0.4.1456, a tiny downloader that scrapes the web.
  ffmpeg version git-2020-01-15-0dc0837 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 9.2.1 (GCC) 20200111
  ```

Pythonå®‰è£…çš„è½¯ä»¶ä¸éœ€è¦é¢å¤–æ·»åŠ ç¯å¢ƒå˜é‡

è‡³æ­¤ï¼Œä½ å·²ç»å®Œæˆäº†æœ€éš¾çš„éƒ¨åˆ†ï¼ŒCongratulations !

### ä¸‰ã€è„šæœ¬ä¸‹è½½

è®¿é—®ï¼šhttps://github.com/JiahaoWongg/Bilidown

![](https://upload-images.jianshu.io/upload_images/5257017-0539bc15a2b4bfbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



åœ¨æµè§ˆå™¨ä¸‹è½½å†å²å†…ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-7eeef2cb440d40df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è§£å‹ï¼Œè·¯å¾„æˆ‘è®¾ä¸ºï¼š`D:\`ï¼Œå°½å¯èƒ½ç®€å•

![ ](https://upload-images.jianshu.io/upload_images/5257017-d89016786eae4fa2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å°†æ–‡ä»¶å¤¹ç®€åŒ–é‡å‘½åä¸º`Bilidown`

![ ](https://upload-images.jianshu.io/upload_images/5257017-b476ad8e14c67f66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



==ä»¥ä¸Šè®¾ç½®å³ä¸ºåˆæ¬¡ä½¿ç”¨è¯¥è„šæœ¬æ‰€éœ€çš„æ‰€ç¯å¢ƒé…ç½®å’Œæ“ä½œ==

==ä»¥ä¸‹ä¸ºä»¥åæ¯æ¬¡è¿æ¬¡è„šæœ¬æ—¶çš„æµç¨‹==

### å››ã€ è„šæœ¬è¿è¡Œæµ‹è¯•

#### â‘  æ‰“å¼€ç»ˆç«¯å¹¶åˆ‡æ¢å·¥ä½œè·¯å¾„

å¿«æ·é”® `Win + X + C` æ‰“å¼€å‘½ä»¤æç¤ºç¬¦é¢æ¿

è¿è¡Œï¼š

```sh
d: & cd \Bilidown
```

ç»“æœï¼š

```sh
C:\Users\Jay Chou>d: & cd \Bilidown

D:\Bilidown>
```

#### â‘¡ è„šæœ¬è¿è¡Œæµ‹è¯•

è¿è¡Œï¼š

```sh
Rscript bilidown.R -h
```

ç»“æœï¼š

```sh
D:\Bilidown>Rscript bilidown.R -h
Usage: bilidown.R [options]


Options:
        --url=URL
                video URL.

        --list=LIST
                Whether download playlist.

        --mp3=MP3
                Whether tranfer to mp3.

        --file=FILE
                Whether get URL(s) from file.

        --mp3Folder=MP3FOLDER
                Mp3 output folder.

        --mp4Folder=MP4FOLDER
                Mp4 output folder.

        --name=NAME
                Rename output file.

        --start=START
                Start point of mp3 cut

        --end=END
                end point of mp3 cut

        -h, --help
                Show this help message and exit



D:\Bilidown>
```

å‡ºç°è¿™æ ·çš„ç»“æœè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼Œå…¶ä¸­``Options`å³ä¸ºè¿è¡Œè„šæœ¬æ‰€éœ€è®¾çš„å‚æ•°ï¼Œå¯ä»¥é˜…è¯»ä¸€ä¸‹ï¼Œæ ¹æ®æç¤ºå·®ä¸å¤šèƒ½çœ‹å‡ºå…¶ä½œç”¨ã€‚

æµ‹è¯•æˆåŠŸåæˆ‘ä»¬å°±è¦è¿›è¡ŒçœŸæ­£çš„è¿è¡Œäº†ï¼Œè¯¥è„šæœ¬å’Œå…¶ä»–å‘½ä»¤è¡Œè½¯ä»¶ä¸€æ ·ï¼Œéƒ½å¿…é¡»èµ‹äºˆæŒ‡å®šæ ¼å¼çš„å‚æ•°æˆ–æ–‡ä»¶ï¼Œä¸€ç‚¹é”™è¯¯ä¸€èˆ¬éƒ½æ˜¯ä¸å…è®¸çš„ï¼Œæˆ–è€…ç»“æœå¯èƒ½ä¼šä¸æ˜¯ä½ æƒ³è¦çš„ã€‚æ‰€ä»¥ä¸‹ä¸€èŠ‚çš„å‚æ•°è®¾ç½®ä¹Ÿè‡³å…³é‡è¦ï¼Œå†³å®šäº†èƒ½ä¸èƒ½å¾—åˆ°ä½ æƒ³è¦çš„ç»“æœï¼

æ¥ä¸‹æ¥å°†ä¸€ä¸€è§£é‡Šæ¯ä¸€å‚æ•°çš„ä½œç”¨å’Œå¦‚ä½•è®¾ç½®

### äº”ã€å‚æ•°è®¾ç½®

ç¬¬äºŒèŠ‚å†…å®¹æåˆ°ï¼Œè¯¥è„šæœ¬æœ‰ä¸¤ä¸ªä½¿ç”¨æ¨¡å¼ï¼Œ`URLæ¥æºäºCMDæ¨¡å¼` å’Œ`URLæ¥æºäºæ–‡ä»¶æ¨¡å¼`

å› æ­¤å‚æ•°è®¾ç½®ä¹Ÿè¦åˆ†ä¸ºè¿™ä¸¤éƒ¨åˆ†è®²è§£

é¦–å…ˆè¦çŸ¥é“çš„æ˜¯ï¼š

- å‚æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸º: `--å‚æ•°å å‚æ•°å€¼`ï¼Œåœ¨ä¸‹ä¸€èŠ‚çš„æ¡ˆä¾‹ä¸­å°†ä¼šæ›´è¯¦ç»†åœ°çœ‹åˆ°

- æ¯ç§æ¨¡å¼ä½ åªéœ€è¦æä¾›ä¸ä¹‹å¯¹åº”çš„urlæ¥æºå³å¯ï¼Œæ—¢å‚æ•°urlå’Œfileå¿…é¡»ä¸”åªèƒ½å­˜åœ¨å…¶ä¸­ä¸€ä¸ª
- å¦‚æœä¸¤ä¸ªå‚æ•°urlå’Œfileéƒ½å­˜åœ¨æˆ–éƒ½ä¸å­˜ï¼Œè„šæœ¬ä¹Ÿä¼šæç¤ºä½ å¿…é¡»è¦æä¾›å…¶ä¸­ä¹‹ä¸€
- ä¸‹é¢æ‰€è¿°çš„å¿…é€‰å’Œå¯é€‰ï¼Œå‰è€…æ„ä¸ºå¿…é¡»ç»™è¿™ä¸ªå‚æ•°èµ‹å€¼ï¼Œè€Œåè€…å¯èµ‹å¯ä¸èµ‹
- å½“ç»™æŸä¸ªå¯é€‰å‚æ•°èµ‹å€¼æ—¶ï¼Œå…¶ä»–çš„ä¸€äº›å‚æ•°å¯èƒ½å°±å˜ä¸ºäº†å¿…é€‰å‚æ•°ã€‚æ¯”å¦‚ä½ å¯ä»¥é€‰æ‹©è¦ä¸è¦å¯¹MP3æ–‡ä»¶è¿›è¡Œåˆ†å‰²ï¼Œå¦‚æœéœ€è¦åˆ†å‰²ï¼Œåˆ™startå‚æ•°éœ€è¦èµ‹å€¼ï¼Œè¿™æ—¶endå‚æ•°è‡ªç„¶ä¹Ÿå°±æ˜¯å¿…é€‰çš„äº†

#### â‘  CMDæ¨¡å¼

- urlï¼›è§†é¢‘é“¾æ¥ï¼›è¯¥æ¨¡å¼ä¸‹ä¸ºå¿…é€‰å‚æ•°

  å³ä¸ºè§†é¢‘é“¾æ¥ï¼Œç›´æ¥ä»è§†é¢‘è§‚çœ‹é¡µé¢çš„åœ°å€æ é‡Œç²˜è´´å³å¯ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†å†…å³ä¸ºè¯¥è§†é¢‘çš„URLï¼Œå¤åˆ¶ä¸‹æ¥å³å¯

  ![ ](https://upload-images.jianshu.io/upload_images/5257017-e0e5c96f56bceb50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼š==URLè¦ç”¨åŒå¼•å·åŒ…å›´èµ·æ¥ï¼Œå› ä¸ºæœ‰çš„URLä¸­å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚`&`ï¼Œä¼šè¢«è¯†åˆ«ä¸ºå‘½ä»¤å­—ç¬¦ï¼Œä¼šå‘ç”ŸæŠ¥é”™==
  
  å¯¹åº”è„šæœ¬ä¸ºï¼š

```sh
Rscript bilidown.R -- url "https://www.bilibili.com/video/BV1dt4s11a7FX?from=search&seid=3497926814758339505"
```

åˆ«çŒ´æ€¥è¿è¡Œï¼Œè¯´è¿è¡Œäº†å†è¿è¡Œ

- listï¼›æ˜¯å¦ä¸‹è½½è§†é¢‘åˆ—è¡¨ï¼›å¯é€‰å‚æ•°

  æˆ‘ä»¬éƒ½çŸ¥é“Bç«™çš„è§†é¢‘æ˜¯å¯ä»¥åˆ†Pçš„ï¼Œå¯¹äºä¸€ä¸ªåˆ†Pè§†é¢‘çš„å…¶ä¸­ä¸€Pçš„URLï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åªä¸‹è½½è¿™ä¸€Pæˆ–è€…ä¸‹è½½æ‰€æœ‰Pï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸‹è½½æŒ‡å®šçš„Pï¼Œä¸è¿‡you-getå®ç°ä¸äº†ï¼Œä½œè€…å¯ä»¥å®ç°ï¼Œä½†ä½œè€…å¤ªæ‡’å°±æ²¡åŠ è¿™ä¸ªåŠŸèƒ½ã€‚

  é»˜è®¤æ˜¯ä¸ä¸‹è½½æ‰€æœ‰Pçš„ï¼Œä¸èµ‹å€¼å³å¯ã€‚å¦‚æœæƒ³ä¸‹è½½æ‰€æœ‰Pï¼Œåˆ™éœ€è¦èµ‹å€¼ä¸º`TRUE`

  ä¸‹è½½å…¨Pçš„æƒ…å†µä¸‹æ­¤æ—¶çš„ä»£ç ï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV1dt411a7FX?from=search&seid=3497926814758339505" --list TRUE
```

- mp3ï¼Œæ˜¯å¦å°†MP4æ–‡ä»¶è½¬åŒ–ä¸ºMP3æ–‡ä»¶ï¼Œå¯é€‰å‚æ•°

  é»˜è®¤ä¸è½¬æ¢ï¼Œå¦‚æœä½ åªæƒ³ä¸‹è½½è§†é¢‘ï¼Œåˆ™ä¸éœ€èµ‹å€¼ï¼›å¦‚æœä½ è¿˜æƒ³å¾—åˆ°éŸ³é¢‘ï¼Œåˆ™éœ€èµ‹å€¼ä¸º`TRUE`

- mp3Folderï¼›MP3æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼›å¯é€‰å‚æ•°ï¼Œå½“MP3ä¸º`TRUE`æ—¶ä¸ºå¿…é€‰å‚æ•°

  ç”µè„‘é‡Œå¯ä»¥åŸå…ˆä¸å­˜åœ¨ä½ æ‰€æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼Œä¸å­˜åœ¨æ—¶è„šæœ¬ä¼šå¸®ä½ åˆ›å»ºï¼›ä¸‹åŒ

- mp4Folderï¼›MP4æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼›å¿…é€‰å‚æ•°

æ’æ’­ä¸€æ¡ï¼šæ–‡ä»¶ä¿å­˜è·¯å¾„å¿…é¡»ä½¿ç”¨ [ç»å¯¹è·¯å¾„ ](https://baike.baidu.com/item/%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84)ï¼Œwindownsç»å¯¹è·¯å¾„ä»¥ç›˜ç¬¦å¼€å¤´ï¼Œå¦‚ï¼š`D:/Bilidown/MP4`

- nameï¼›æ˜¯å¦å¯¹ä¸‹è½½çš„æ–‡ä»¶é‡å‘½åï¼›å¯é€‰å‚æ•°

  é»˜è®¤ä¸é‡å‘½åï¼Œéœ€è¦é‡å‘½åçš„è¯éœ€è¦å°†åå­—èµ‹å€¼ç»™nameå‚æ•°

  å¦‚åœ¨ä»¥ä¸Šå…¨ä¸º`TRUE`çš„æƒ…å†µä¸‹ï¼Œå°†ä¸‹è½½çš„è§†é¢‘åŠè½¬çš„éŸ³é¢‘å‡å‘½åä¸º`ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ`çš„ä»£ç ä¸ºï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV1dt411a7FX?from=search&seid=3497926814758339505" --list TRUE --mp3 TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 --name ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ
```

  åˆ™è¾“å‡ºæ–‡ä»¶ä¸º:`ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ.mp3` å’Œ `ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ.mp4`

- start åŠ end

  æ˜¾ç„¶è¿™ä¸¤ä¸ªä¹Ÿæ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå¦‚æœä½ ä¸æƒ³å°†MP3æ–‡ä»¶åˆ†å‰²ä¸ºä½ æƒ³è¦çš„éƒ¨åˆ†ï¼Œåˆ™ä¸¤ä¸ªéƒ½èµ‹å€¼å³å¯

  è‹¥æœæƒ³åˆ†å‰²ï¼Œåˆ™éœ€è¦åˆ†åˆ«å¯¹å®ƒä»¬è¿›è¡Œèµ‹å€¼

  èµ‹çš„å€¼ä¸ºæ—¶é—´ç‚¹ï¼Œæ ¼å¼ä¸º`00:00:00`ï¼Œæ—¢æ—¶åˆ†ç§’

  æ¯”å¦‚ä½ åªæƒ³ä¿ç•™è½¬çš„MP3æ–‡ä»¶çš„10ç§’è‡³1åˆ†10ç§’ä¹‹é—´çš„éƒ¨åˆ†ï¼Œä»£ç ä¸ºï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV1JE411D74q?from=search&seid=12356753915334889298"  --mp3 TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 --name ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ --start 00:00:10 --end 00:01:10
```

è¿™å°±æ˜¯è¯¥æ¨¡å¼ä¸‹æœ€å®Œæ•´çš„ä»£ç ï¼Œæ•´ç†å¥½çœ‹ä¸€ç‚¹ï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV1dt411a7FX?from=search&seid=3497926814758339505" 
				   --mp3 TRUE 
				   --mp3Folder D:/Bilidown/MP3 
				   --mp4Folder D:/Bilidown/MP4 
				   --name ç‰›é€¼è„šæœ¬ä¸‹è½½çš„ä¸œä¸œ 
				   --start 00:00:10 
				   --end 00:01:10
```

ä¸€ç›®äº†ç„¶ã€‚æ³¨æ„æˆ‘æŠŠlistå‚æ•°ç»™å»æ‰äº†ï¼Œå› ä¸ºï¼Œå¦‚æœä½ ä¸‹è½½å…¨Pè§†é¢‘ï¼Œé‚£ä½ å¯¹å¤šä¸ªè§†é¢‘åœ¨åŒæ ·çš„æ—¶é—´ç‚¹è¿›è¡Œåˆ‡å‰²æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆé€»è¾‘çš„

#### â‘¡ æ–‡ä»¶æ¨¡å¼

##### fileæ–‡ä»¶æ ¼å¼è¦æ±‚

â€‹		ç”±äºæ—¢è¦è€ƒè™‘ç”¨æˆ·çš„ä½“éªŒè€Œæ ¼å¼ä¸èƒ½å¤ªå¤æ‚ï¼ŒåŒæ—¶åˆè¦è€ƒè™‘ä½œè€…çš„èƒ½åŠ›èŒƒå›´ï¼Œå› ä¸ºè¦å®ç°å¤šä¸ªè§†é¢‘çš„æµç¨‹åŒ–å¤„ç†ï¼Œè¯¥æ–‡ä»¶å†…å®¹ç¨è®¸å¤æ‚ï¼Œå…¶å®ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œå°±æ˜¯å°†CMDæ¨¡å¼çš„ä¸€äº›å‚æ•°å€¼å†™å…¥è¯¥æ–‡ä»¶ä¸­è€Œå·²ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ–‡ä»¶å†…å®¹æ ¼å¼å¿…é¡»éµå®ˆè§„å®šï¼Œå…·ä½“è§„å®šå¦‚ä¸‹ï¼š

- æ¯ä¸€è¡Œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ä¸‹è½½ä¿¡æ¯ï¼Œæ–‡ä»¶æ ¼å¼ä¸º **txt** æ ¼å¼
- å¯¹äºæŸä¸€è¡Œæ¥è¯´ï¼Œä½ **æœ€å¤š**å¯ä»¥æä¾›6ä¸ªä¸‹è½½ä¿¡æ¯ï¼Œæ—¢CMDæ¨¡å¼ä¸­æåˆ°çš„`url mp3 list name start end`
- åªéœ€è¦æä¾›**å‚æ•°å€¼**å³å¯ï¼Œå‚æ•°åä¸éœ€æä¾›ï¼Œæ¯ä¸ªå‚æ•°å€¼ä¹‹é—´å¿…é¡»ç”±**ç©ºæ ¼**ä½œä¸ºåˆ†éš”
- å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æä¾›**å°‘äº**6ä¸ªçš„ä¸‹è½½ä¿¡æ¯ï¼Œä½†å¿…é¡»éµå¾ªçš„æ˜¯ï¼Œå‚æ•°å€¼çš„é¡ºåºæ˜¯**å›ºå®š**çš„ï¼Œå³æŒ‰ç…§==url mp3 list name start end==çš„é¡ºåºï¼Œå¦‚æœä½ æ‰€æä¾›çš„å‚æ•°åœ¨è¿™6ä¸ªé‡Œé¢**ä¸æ˜¯è¿ç»­**çš„ï¼Œæ¯”å¦‚ä½ åªæƒ³æä¾›`url name`ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™ä½ å¿…é¡»å°†ä¸­é—´ç©ºç¼ºçš„ä½ç½®çš„å€¼è®¾ä¸º==no==ï¼Œæ—¢==url no no name==ï¼Œå³ä¾§ç©ºç¼ºçš„å‚æ•°åˆ™ä¸éœ€å†™`no`ï¼Œç›´æ¥å›è½¦å³å¯
- ä¾‹å¦‚ï¼Œä½ å°†ä¸€ä¸ªè§†é¢‘çš„URLæ”¾åœ¨æ–‡ä»¶é‡Œï¼Œä½ æƒ³å°†ä¸‹è½½çš„è§†é¢‘è½¬æ¢ä¸ºéŸ³é¢‘ï¼Œä½†åªä¸‹è½½æ­¤URLæ‰€ä»£è¡¨çš„å•Pè§†é¢‘ï¼Œä¸éœ€è¦é‡å‘½åï¼Œè€Œéœ€è¦å°†éŸ³é¢‘åˆ†å‰²ï¼Œåˆ™åœ¨URLæ–‡ä»¶é‡Œä½ å¯ä»¥è¿™æ ·å†™ï¼š

```sh
"https://www.bilibili.com/video/BV1dt411a7FX?from=search&seid=3497926814758339505" TRUE no no 00:00:10 00:01:10
```

- æ–‡ä»¶çš„æœ€åä¸€è¡Œ==å¿…é¡»æ˜¯ç©ºè¡Œ==ï¼ç²˜è´´å®Œæœ€åä¸€ä¸ªURLè®°å¾—==å›è½¦==ä¸€ä¸‹ï¼
- è™½ç„¶å¾ˆæœ‰ç‚¹éº»çƒ¦ï¼Œä½†ç”¨èµ·æ¥å¾ˆé¦™ğŸ˜‚

##### è¯¥æ¨¡å¼å‚æ•°è®¾ç½®

- file; å«æœ‰urlå’Œå…¶ä»–å¤„ç†ä¿¡æ¯çš„``txt`æ–‡ä»¶åï¼›è¯¥æ¨¡å¼ä¸‹ä¸ºå¿…é€‰å‚æ•°

  éœ€è¦æ³¨æ„ï¼Œæ–‡ä»¶é¡»å’Œ`bilidown.R`è„šæœ¬ä½äº**åŒä¸€æ–‡ä»¶å¤¹**ä¸‹ï¼Œå¦åˆ™ä½ éœ€è¦æä¾›**ç»å¯¹è·¯å¾„**ï¼Œå¦‚`D:/Bilidown/URL_List.txt`

- mp3Folderï¼›å¯é€‰å‚æ•°

  åªè¦ä½ æƒ³è¦è¿™äº›è§†é¢‘ä¸­çš„ä»»ä½•ä¸€ä¸ªè§†é¢‘è½¬ä¸ºéŸ³é¢‘ï¼Œä½ å°±è¦æä¾›æ”¹å‚æ•°

- mp4Folderï¼›ä»ç„¶æ˜¯å¿…é€‰å‚æ•°

è„šæœ¬ä¼šå¾ªç¯fileæ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œæ¯ä¸€å¾ªç¯æ‰§è¡Œä¸€æ¬¡CMDæ¨¡å¼

### å…­ã€å¼€å§‹å®æˆ˜

è®°å¾—è¦å…ˆè¿›å…¥è„šæœ¬æ‰€åœ¨æ–‡ä»¶å¤¹ï¼š

```sh
d: & cd Bilidown
```

#### â‘ CMDæ¨¡å¼

##### å•Pä¸‹è½½

å‘½ä»¤ï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV1JE411D74q?from=search&seid=12356753915334889298"  --mp3 TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 --name å‘¨æ°ä¼¦-ç§˜å¯†èŠ±å›­(æ‰’å¸¦) --start 00:00:10 --end 00:01:10
```

å±å¹•æ˜¾ç¤ºçš„ä¸‹è½½è¿‡ç¨‹ï¼š

```sh
D:\Bilidown>Rscript bilidown.R --url "https://www.bilibili.com/video/BV1JE411D74q?from=search&seid=12356753915334889298"  --mp3 TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 --name å‘¨æ°ä¼¦-ç§˜å¯†èŠ±å›­(æ‰’å¸¦) --start 00:00:10 --end 00:01:10

Downloading video file ...
site:                Bilibili
title:               å‘¨æ°ä¼¦ã€Šç§˜å¯†èŠ±å›­ã€‹ç¼–æ›²æ‰’å¸¦
stream:
    - format:        dash-flv720
      container:     mp4
      quality:       é«˜æ¸… 720P
      size:          21.9 MiB (22968001 bytes)
    # download-with: you-get --format=dash-flv720 [URL]

Downloading å‘¨æ°ä¼¦ã€Šç§˜å¯†èŠ±å›­ã€‹ç¼–æ›²æ‰’å¸¦.mp4 ...
 100% ( 21.9/ 21.9MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  743 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦ã€Šç§˜å¯†èŠ±å›­ã€‹ç¼–æ›²æ‰’å¸¦.mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Cutting mp3 file
Copying & rename files and remove tmpFolder
Done!

D:\Bilidown>
```

ç»“æœï¼š

MP4 æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-323dfedfd85082fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

MP3æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-c405977fb0c11ba3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![ ](https://upload-images.jianshu.io/upload_images/5257017-502ed2b9569f97f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å¯ä»¥çœ‹åˆ°æ—¶é•¿åªæœ‰ä¸€åˆ†é’Ÿï¼Œå› ä¸ºæˆ‘å–çš„æ˜¯ 00:00:10 è‡³ 00:01:10

##### å¤šPä¸‹è½½

å¤šPä¸‹è½½å°±ä¸å¿…é‡å‘½åäº†

å‘½ä»¤ï¼š

```sh
Rscript bilidown.R --url "https://www.bilibili.com/video/BV17t411K7et?from=search&seid=3759713561223284474"  --mp3 TRUE --list TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 
```

å±å¹•æ˜¾ç¤ºçš„ä¸‹è½½è¿‡ç¨‹ï¼š

```sh
D:\Bilidown>Rscript bilidown.R --url "https://www.bilibili.com/video/BV17t411K7et?from=search&seid=3759713561223284474"  --mp3 TRUE --list TRUE --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4

Downloading video file ...
site:                Bilibili
title:               ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P1. ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P)
stream:
    - format:        dash-flv720
      container:     mp4
      quality:       é«˜æ¸… 720P
      size:          4.3 MiB (4464751 bytes)
    # download-with: you-get --format=dash-flv720 [URL]

Downloading ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P1. ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P).mp4 ...
 100% (  4.3/  4.3MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  473 kB/s
Merging video parts... Merged into ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P1. ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P).mp4

Skipping captions or danmaku.
site:                Bilibili
title:               ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P2. è‡´æ•¬ç§‘æ¯”_è€ƒå¤MVã€Šå¤©åœ°ä¸€æ–—ã€‹)
stream:
    - format:        dash-flv720
      container:     mp4
      quality:       é«˜æ¸… 720P
      size:          45.2 MiB (47435509 bytes)
    # download-with: you-get --format=dash-flv720 [URL]

Downloading ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P2. è‡´æ•¬ç§‘æ¯”_è€ƒå¤MVã€Šå¤©åœ°ä¸€æ–—ã€‹).mp4 ...
 100% ( 45.2/ 45.2MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]   92 kB/s
Merging video parts... Merged into ä½ èƒ½çŒœåˆ°è¿™æ˜¯å‘¨æ°ä¼¦å“ªä¸€é¦–æ­Œå—ï¼Ÿç­”æ¡ˆåœ¨2P (P2. è‡´æ•¬ç§‘æ¯”_è€ƒå¤MVã€Šå¤©åœ°ä¸€æ–—ã€‹).mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Copying & rename files and remove tmpFolder
Done!

D:\Bilidown>
```

ç»“æœï¼š

MP4æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-678d83dcd7668fe4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

MP3æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-b41dbaaea74a1743.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### â‘¡æ–‡ä»¶æ¨¡å¼

åˆ‡è®°URLæ–‡ä»¶å†…å®¹æ ¼å¼ï¼ï¼ï¼

æˆ‘å‡†å¤‡äº†å‡ ä¸ªæµ‹è¯•æ•°æ®ï¼Œä¿å­˜åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹çš„``test.txt`æ–‡ä»¶ä¸­ï¼Œæœ‰5ä¸ªé“¾æ¥ï¼Œç»™ä¸äº†ä¸åŒçš„å¤„ç†æ¨¡å¼ã€‚å¤§å®¶ä¹Ÿå¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™æŒ‰ç…§è¿™æ ·çš„æ ¼å¼åˆ›å»ºå°±è¡Œäº†ï¼Œè®°å¾—è¿è¡Œçš„ä»£ç æ–‡ä»¶åå­—è¦æ”¹æˆä½ è‡ªå·±å†™çš„ã€‚

![ ](https://upload-images.jianshu.io/upload_images/5257017-70e0f962ea160ec7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿è¡Œä»£ç ï¼š

```sh
Rscript bilidown.R --file D:/Bilidown/test.txt --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4 
```

å±å¹•æ˜¾ç¤ºçš„ä¸‹è½½è¿‡ç¨‹ï¼š

```sh
D:\Bilidown>Rscript bilidown.R --file D:/Bilidown/test.txt --mp3Folder D:/Bilidown/MP3 --mp4Folder D:/Bilidown/MP4

Processing serial number 1, Remian 4

Downloading video file ...
site:                Bilibili
title:               æˆ‘æŠŠå‘¨æ°ä¼¦å©šç¤¼è¿›è¡Œæ›²æ‰’å¸¦ç¼–å‡ºæ¥äº†
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          23.7 MiB (24804205 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading æˆ‘æŠŠå‘¨æ°ä¼¦å©šç¤¼è¿›è¡Œæ›²æ‰’å¸¦ç¼–å‡ºæ¥äº†.mp4 ...
 100% ( 23.7/ 23.7MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  106 kB/s
Merging video parts... Merged into æˆ‘æŠŠå‘¨æ°ä¼¦å©šç¤¼è¿›è¡Œæ›²æ‰’å¸¦ç¼–å‡ºæ¥äº†.mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Copying & rename files and remove tmpFolder
Done!

Processing serial number 2, Remian 3

Downloading video file ...
site:                Bilibili
title:               å‘¨æ°ä¼¦ç§˜å¯†èŠ±å›­æ‰’å¸¦ä¼´å¥ï¼æ—¢ç„¶åŸç‰ˆçš„ä¸å¤Ÿæ¸…æ™°ï¼Œé‚£å°±è‡ªå·±åšä¸€ä¸ªå§ï¼
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          18.2 MiB (19045299 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading å‘¨æ°ä¼¦ç§˜å¯†èŠ±å›­æ‰’å¸¦ä¼´å¥ï¼æ—¢ç„¶åŸç‰ˆçš„ä¸å¤Ÿæ¸…æ™°ï¼Œé‚£å°±è‡ªå·±åšä¸€ä¸ªå§ï¼.mp4 ...
 100% ( 18.2/ 18.2MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  696 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦ç§˜å¯†èŠ±å›­æ‰’å¸¦ä¼´å¥ï¼æ—¢ç„¶åŸç‰ˆçš„ä¸å¤Ÿæ¸…æ™°ï¼Œé‚£å°±è‡ªå·±åšä¸€ä¸ªå§ï¼.mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Copying & rename files and remove tmpFolder
Done!

Processing serial number 3, Remian 2

Downloading video file ...
site:                Bilibili
title:               å‘¨æ°ä¼¦åœ¨å¿«æœ¬ç»™å´æ˜•çš„ä¸‰é”®æˆæ›²æ‰’å¸¦
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          31.1 MiB (32599288 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading å‘¨æ°ä¼¦åœ¨å¿«æœ¬ç»™å´æ˜•çš„ä¸‰é”®æˆæ›²æ‰’å¸¦.mp4 ...
 100% ( 31.1/ 31.1MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]   96 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦åœ¨å¿«æœ¬ç»™å´æ˜•çš„ä¸‰é”®æˆæ›²æ‰’å¸¦.mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Copying & rename files and remove tmpFolder
Done!

Processing serial number 4, Remian 1

Downloading video file ...
site:                Bilibili
title:               å‘¨æ°ä¼¦ç¼–æ›²æ‰’å¸¦ç¬¬ä¸€å¼ ä¸“è¾‘ã€Šåæ–¹å‘çš„é’Ÿã€‹ç¼–æ›²æ‰’å¸¦
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          52.9 MiB (55428095 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading å‘¨æ°ä¼¦ç¼–æ›²æ‰’å¸¦ç¬¬ä¸€å¼ ä¸“è¾‘ã€Šåæ–¹å‘çš„é’Ÿã€‹ç¼–æ›²æ‰’å¸¦.mp4 ...
 100% ( 52.9/ 52.9MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  100 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦ç¼–æ›²æ‰’å¸¦ç¬¬ä¸€å¼ ä¸“è¾‘ã€Šåæ–¹å‘çš„é’Ÿã€‹ç¼–æ›²æ‰’å¸¦.mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Cutting mp3 file
Copying & rename files and remove tmpFolder
Done!

Processing serial number 5, Remian 0

Downloading video file ...
site:                Bilibili
title:               å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P1. è’²å…¬è‹±çš„çº¦å®š)
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          96.8 MiB (101538738 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P1. è’²å…¬è‹±çš„çº¦å®š).mp4 ...
 100% ( 96.8/ 96.8MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]   90 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P1. è’²å…¬è‹±çš„çº¦å®š).mp4

Skipping captions or danmaku.
site:                Bilibili
title:               å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P2. è’²å…¬è‹±çš„çº¦å®šä¼´å¥)
stream:
    - format:        dash-flv
      container:     mp4
      quality:       é«˜æ¸… 1080P
      size:          61.7 MiB (64708427 bytes)
    # download-with: you-get --format=dash-flv [URL]

Downloading å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P2. è’²å…¬è‹±çš„çº¦å®šä¼´å¥).mp4 ...
 100% ( 61.7/ 61.7MB) â”œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”¤[2/2]  659 kB/s
Merging video parts... Merged into å‘¨æ°ä¼¦ ã€Šè’²å…¬è‹±çš„çº¦å®šã€‹å®Œæ•´æ‰’å¸¦è¿˜åŸ-æ—è¿ˆå¯ç¼–æ›² (P2. è’²å…¬è‹±çš„çº¦å®šä¼´å¥).mp4

Skipping captions or danmaku.
Transcoding flv file to mp4 file
Transcoding mp4 file to mp3 file
Copying & rename files and remove tmpFolder
Done!

D:\Bilidown>
```

æ¯å¤„ç†ä¸€ä¸ªURLéƒ½ä¼šæç¤ºï¼š`Processing serial number 1, Remian 4`ï¼Œè¿™å‘Šè¯‰ä½ å½“å‰å¤„ç†ç¬¬å‡ ä¸ªURLï¼Œè¿˜å‰©å¤šå°‘ä¸ªç­‰å¾…å¤„ç†ã€‚

ç»“æœï¼š

MP4æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-93ec901eba7443c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

MP3æ–‡ä»¶ï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-584f974e4c4205b5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è™½ç„¶å†™URLæ–‡ä»¶æœ‰äº›éº»çƒ¦ï¼Œä½†ç°åœ¨çœ‹æ¥æ˜¯ä¸æ˜¯æŒºå€¼å¾—çš„ğŸ˜



---



## è§†é¢‘å¼¹å¹•æ–‡ä»¶ä¸‹è½½ï¼Œå¹¶ä»¥`txt`æ ¼å¼è¾“å‡º

ç»“æœå±•ç¤ºï¼š

![ ](https://upload-images.jianshu.io/upload_images/5257017-016fc07010f373a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ’åœ¨ä¸Šé¢çš„æ˜¯æœ€æ–°çš„å‘å¸ƒçš„å¼¹å¹•ï¼Œè¶Šå¾€ä¸‹è¶Šæ™š



#### ä½¿ç”¨æ–¹æ³•

- è„šæœ¬ï¼šä½äºåŒä¸€ç›®å½•ä¸‹çš„ `getChat.R`

- å‚æ•°

  - urlï¼›è§†é¢‘é“¾æ¥ï¼›å¿…é€‰å‚æ•°

  - name; é‡å‘½åï¼›å¯é€‰å‚æ•°
    - ä¸é‡å‘½åä¼šé»˜è®¤å‘½åä¸º`chat.txtï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢æ–‡ä»¶é‡å¤ï¼Œæœ€å¥½å‘½åä¸€ä¸‹
  - outFolderï¼›æŒ‡å®š`txt`æ–‡ä»¶ä¿å­˜ä½ç½®ï¼›å¯é€‰å‚æ•°
    - æŒ‡å®šè·¯å¾„å¯ä»¥ä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹

#### è¿è¡Œ

```sh
Rscript getChat.R --url "https://www.bilibili.com/video/BV1aW411y7Ap?from=search&seid=1744832395255800797" --name æµ‹è¯• --outFolder Chats
```

![ ](https://upload-images.jianshu.io/upload_images/5257017-89ccac2feccf6fd0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### å¯¹æ¯”

![ ](https://upload-images.jianshu.io/upload_images/5257017-6a5008d4c62dc03c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



---



## FFmpegçš„ä¸€äº›å¸¸ç”¨åŠŸèƒ½

æ–‡ä»¶æ ¼å¼çš„è½¬æ¢ï¼Œè§†éŸ³é¢‘çš„åˆ‡å‰²éƒ½æ˜¯ä½¿ç”¨ ffmpeg è½¯ä»¶å®Œæˆçš„ï¼Œæˆ‘åªæ˜¯åŠ ä»¥åŒ…è£…æ•´åˆã€‚

å¦‚æœå°ä¼™ä¼´ä»¬æƒ³å•ç‹¬å®Œæˆä¸Šè¿°æŸä¸€åŠŸèƒ½çš„è¯ï¼Œffmpeg è¿˜éœ€ç•¥æ‡‚ä¸€ç‚¹çš„

### åŠŸèƒ½ä»‹ç»

åŒæ ·ä¹Ÿæ˜¯åœ¨ç»ˆç«¯é‡Œè¿è¡Œï¼Œç›´æ¥ä½¿ç”¨`ffmpeg`å‘½ä»¤å³å¯ï¼Œå…·ä½“å¸¸ç”¨åŠŸèƒ½å¦‚ä¸‹

#### â‘  æ ¼å¼è½¬æ¢

- ä¸åŒè§†é¢‘æ ¼å¼ä¹‹é—´çš„è½¬æ¢ï¼Œè§†éŸ³é¢‘ä¹‹é—´çš„è½¬æ¢ç­‰

- æ¯”å¦‚è¾“å…¥æ–‡ä»¶ä¸ºï¼š`xxx.format1`ï¼Œè¾“å‡ºæ–‡ä»¶ä¸ºï¼š`xxx.format2`

- å³è¦æŠŠ`xxx`æ–‡ä»¶ä»æ ¼å¼`format1`è½¬æ¢ä¸º`format2

- å‘½ä»¤ä¸ºï¼š

```sh
ffmpeg -i xxx.format1 `xxx.format2`
```

- ä»¥flvè½¬mp4ä¸ºä¾‹ï¼š

```sh
ffmpeg -i test.flv `test.mp4`
```

#### â‘¡ è§†éŸ³é¢‘åˆ‡å‰²

- è§†é¢‘åŒæ ·æ˜¯å¯ä»¥åˆ‡å‰²çš„ï¼Œä¸è¿‡æˆ‘æ²¡æœ‰åŠ å…¥è¿™ä¸ªåŠŸèƒ½ï¼Œä¸è¿‡ç”¨æ³•å’ŒéŸ³é¢‘åˆ‡å‰²å®Œå…¨ä¸€æ ·

- ä»¥éŸ³é¢‘åˆ‡å‰²ä¸ºä¾‹ï¼š

- ```sh
  ffmpeg -ss 00:00:10 -t 00:01:00 -i input.mp3 -c copy output.mp3
  ```

  å…¶ä¸­ï¼š

  - **`-i`** è¾“å…¥çš„éŸ³é¢‘
  - **`-c copy`** ç”¨åŸæ¥çš„ç¼–ç å¹¶å¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­
  - **`-ss`** èµ·å§‹æ—¶é—´
  - **`-t`** æˆªå–éŸ³é¢‘æ—¶é—´é•¿åº¦



å¦å¤–ï¼Œæœèµ„æ–™æ—¶çœ‹åˆ°ä¸€ä½[è€å…„å†™é“](https://www.jianshu.com/p/7647a55daa18#fn2)éŸ³è§†é¢‘è¿˜å¯ä»¥æœ‰è½¬åœºæ•ˆæœï¼Œffmpegçš„åŠŸèƒ½çœŸå¼ºå¤§ï¼š

> ä»0så¼€å§‹æ·¡å…¥3s
>
> 
>
> ```csharp
> ffmpeg -i input.mp3 -af "afade=t=in:ss=0:d=3" out.mp3
> ```
>
> ä»50ç§’å¼€å§‹æ·¡å‡º5s
>
> 
>
> ```csharp
> ffmpeg -i input.mp3 -af "afade=t=out:st=50:d=5" out.mp3
> ```
> å‚æ•°`-af`ä¸ºéŸ³é¢‘æ»¤é•œï¼Œ`afade`ä¸ºéŸ³é¢‘æ·¡å…¥æ·¡å‡ºã€‚ç›¸åº”çš„å¦‚æœæ˜¯å¯¹è§†é¢‘çš„æ“ä½œï¼Œè¿™é‡Œçš„å‚æ•°`afade`å¤„å¯ä»¥ä½¿ç”¨`fade`ã€‚

#### åˆå¹¶éŸ³è§†é¢‘

```sh
ffmpeg -i input1.mp4 -i input2.mp4 -i input3.mp4 -lavfi hstack=inputs=3 output.mp4
```

éœ€è¦ä¸€ä¸€æŒ‡å®šè¾“å…¥æ–‡ä»¶å’Œè¾“å…¥æ–‡ä»¶ä¸ªæ•°



---



> å¦‚æœ‰ç–‘é—®æˆ–çº é”™ï¼Œè¯·è”ç³»ï¼š[jhaowong1998@sina.com](mailto:jhaowong1998@sina.com)